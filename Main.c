#pragma config(Motor,  port1,           mIntake,       tmotorVex393_HBridge, openLoop)
#pragma config(Motor,  port2,           mFly1,         tmotorVex393TurboSpeed_MC29, openLoop)
#pragma config(Motor,  port3,           mFly2,         tmotorVex393TurboSpeed_MC29, openLoop, reversed)
#pragma config(Motor,  port4,           mFly3,         tmotorVex393TurboSpeed_MC29, openLoop, reversed)
#pragma config(Motor,  port5,           mFly4,         tmotorVex393TurboSpeed_MC29, openLoop)
#pragma config(Motor,  port6,           mDrBr,         tmotorVex393_MC29, openLoop, reversed)
#pragma config(Motor,  port7,           mDrFr,         tmotorVex393_MC29, openLoop, reversed)
#pragma config(Motor,  port8,           mDrBl,         tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port9,           mDrFl,         tmotorVex393_MC29, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

#define JOYSTICK_DEADZONE  5
//2-5 flyhweels, turbo MC
//port 1 intake
//port 6 7 wheels left 8 9 wheels right
//#include "FlyControl.c"
//#include "MecDrive.c"
//#include "Vex_Competition_Includes.c"


// void pre_autonomous()
// {
// //Place pre-autonomous code here
// }
// task autonomous()
// {
// 	AutonomousCodePlaceholderForTesting();
// }
//task usercontrol()



void mecDrive(){
	float x;
	float y;
	float speed;
	float turnSpeed;
	if(abs(vexRT[Ch1]) > JOYSTICK_DEADZONE){
		x = vexRT[Ch1];
	}
	if(abs(vexRT[Ch2]) > JOYSTICK_DEADZONE){
		y = vexRT[Ch2];
	}
//	if(abs(vexRT[Ch3]) > JOYSTICK_DEADZONE){
	 	speed = vexRT[Ch3]/127;
//	}
//	if(abs(vexRT[Ch4]) > JOYSTICK_DEADZONE){
		turnSpeed = vexRT[Ch4]/127;
//	}

	//float heading = atan(y/x);


	motor[mDrFr] = vexRT[Ch2] - vexRT[Ch4] - vexRT[Ch1];
	motor[mDrBr] = vexRT[Ch2] - vexRT[Ch4] + vexRT[Ch1];
	motor[mDrFl] = vexRT[Ch2] + vexRT[Ch4] + vexRT[Ch1];
	motor[mDrBl] = vexRT[Ch2] + vexRT[Ch4] - vexRT[Ch1];



}


void _updateFlyWheel(int power){
	motor[mFly1] = power;
	motor[mFly2] = power;
	motor[mFly3] = power;
	motor[mFly4] = power;
}

task FlyWheelControl(){
	while(true){
		if(vexRT[Btn5U]){
			_updateFlyWheel(80);
		}
		if(vexRT[Btn7D]){
			_updateFlyWheel(0);
		}
		if(vexRT[Btn6D]){
			_updateFlyWheel(30);
		}
		if(vexRT[Btn6U]){
			_updateFlyWheel(60);
		}

		wait1Msec(20);
	}
}

task main()
{
/**	DriveBase dr;
	dr.fl = mDrFl;
	dr.fr = mDrFr;
	dr.bl = mDrBl;
	dr.br = mDrBr;
	initMecDrive(&dr);**/
//	fw_motors fly;
	//fly.m[0] = mFly1;
	//fly.m[1] = mFly2;
	//fly.m[2] = mFly3;
	//fly.m[3] = mFly4;
	//initFlyWheel(fly);
	startTask(FlyWheelControl);
	bool toggle = false
	while(true)
	{
		if(vexRT[Btn5D] == 1){
			motor[mIntake] = 90;
		}

		else if(vexRT[Btn8D] == 1){
			motor[mIntake] = -127;
		}
		else{
			motor[mIntake] = 0;
		}
		mecDrive();
		delay(20);
	}

}
